<config xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <template>
      <name>mdt</name>
      <ned-id>
        <id xmlns:cisco-iosxr-cli-7.28="http://tail-f.com/ns/ned-id/cisco-iosxr-cli-7.28">cisco-iosxr-cli-7.28:cisco-iosxr-cli-7.28</id>
        <config>
          <telemetry xmlns="http://tail-f.com/ned/cisco-ios-xr" tags="replace">
            <model-driven>
              <destination-group>
                <id>MDT</id>
                <address-family>
                  <ipv4>
                    <address>{{ templates.mdt_dest_ipv4 }}</address>
                    <port>{{ templates.mdt_dest_port }}</port>
                    <encoding>self-describing-gpb</encoding>
                    <protocol>
                      <tcp/>
                    </protocol>
                  </ipv4>
                </address-family>
              </destination-group>
              <sensor-group>
                <id>HEALTH</id>
                <sensor-path>
                  <name>Cisco-IOS-XR-shellutil-oper:system-time/uptime</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-wdsysmon-fd-oper:system-monitoring/cpu-utilization</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-nto-misc-oper:memory-summary/nodes/node/summary</name>
                </sensor-path>
              </sensor-group>
              <sensor-group>
                <id>OPTICS</id>
                <sensor-path>
                  <name>Cisco-IOS-XR-controller-optics-oper:optics-oper/optics-ports/optics-port/optics-info</name>
                </sensor-path>
              </sensor-group>
              <sensor-group>
                <id>ROUTING</id>
                <sensor-path>
                  <name>Cisco-IOS-XR-clns-isis-oper:isis/instances/instance/statistics-global</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-clns-isis-oper:isis/instances/instance/levels/level/adjacencies/adjacency</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-ipv4-bgp-oper:bgp/instances/instance/instance-active/default-vrf/process-info</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-ip-rib-ipv4-oper:rib/vrfs/vrf/afs/af/safs/saf/ip-rib-route-table-names/ip-rib-route-table-name/protocol/isis/as/information</name>
                </sensor-path>
              </sensor-group>
              <sensor-group>
                <id>INTERFACES</id>
                <sensor-path>
                  <name>Cisco-IOS-XR-pfi-im-cmd-oper:interfaces/interface-summary</name>
                </sensor-path>
                <sensor-path>
                  <name>Cisco-IOS-XR-infra-statsd-oper:infra-statistics/interfaces/interface/latest/generic-counters</name>
                </sensor-path>
              </sensor-group>
              <subscription>
                <id>HEALTH</id>
                <sensor-group-id>
                  <name>HEALTH</name>
                  <strict-timer/>
                  <sample-interval>30000</sample-interval>
                </sensor-group-id>
                <destination-id>
                  <name>MDT</name>
                </destination-id>
                <source-interface>
                  <Loopback>0</Loopback>
                </source-interface>
              </subscription>
            </model-driven>
          </telemetry>
        </config>
      </ned-id>
    </template>
  </devices>
</config>